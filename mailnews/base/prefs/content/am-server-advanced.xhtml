<?xml version="1.0"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<!DOCTYPE html SYSTEM "chrome://messenger/locale/am-server-advanced.dtd">
<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
  xmlns:html="http://www.w3.org/1999/xhtml"
  scrolling="false"
>
  <head>
    <title>&serverAdvanced.label;</title>
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src chrome:; script-src chrome: 'unsafe-inline' moz-src:; style-src chrome: 'unsafe-inline'"
    />
    <link rel="stylesheet" href="chrome://messenger/skin/accountManage.css" />
    <link rel="stylesheet" href="chrome://messenger/skin/icons.css" />
    <link rel="stylesheet" href="chrome://messenger/skin/folderMenus.css" />
    <link rel="localization" href="messenger/accountSettings.ftl" />
    <script
      defer="defer"
      src="chrome://messenger/content/globalOverlay.js"
    ></script>
    <script
      defer="defer"
      src="chrome://global/content/editMenuOverlay.js"
    ></script>
    <script
      defer="defer"
      src="chrome://messenger/content/am-server-advanced.js"
    ></script>
  </head>
  <html:body
    xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
  >
    <dialog buttons="accept,cancel" style="width: 100vw; height: 100vh">
      <stringbundle
        id="bundle_prefs"
        src="chrome://messenger/locale/prefs.properties"
      />

      <label id="serverPrettyName" />

      <separator class="thin" />

      <!-- IMAP Panel -->
      <vbox id="imapPanel">
        <hbox align="center">
          <label
            id="serverDirectoryLabel"
            value="&serverDirectory.label;"
            accesskey="&serverDirectory.accesskey;"
            control="serverDirectory"
          />
          <hbox class="input-container">
            <html:input
              id="serverDirectory"
              type="text"
              class="input-inline"
              aria-labelledby="serverDirectoryLabel"
              amsa_persist="true"
            />
          </hbox>
        </hbox>

        <checkbox
          id="usingSubscription"
          amsa_persist="true"
          label="&usingSubscription.label;"
          accesskey="&usingSubscription.accesskey;"
        />

        <checkbox
          id="dualUseFolders"
          amsa_persist="true"
          label="&dualUseFolders.label;"
          accesskey="&dualUseFolders.accesskey;"
        />

        <separator class="groove" />
        <hbox align="center">
          <label
            id="maximumConnectionsNumberLabel"
            control="maximumConnectionsNumber"
            value="&maximumConnectionsNumber.label;"
            accesskey="&maximumConnectionsNumber.accesskey;"
          />
          <html:input
            id="maximumConnectionsNumber"
            type="number"
            class="size3 input-inline"
            min="1"
            max="1000"
            amsa_persist="true"
            aria-labelledby="maximumConnectionsNumberLabel"
          />
        </hbox>

        <separator class="groove" />
        <description>&namespaceDesc.label;</description>
        <hbox class="indent">
          <vbox>
            <hbox flex="1" align="center">
              <label
                id="personalNamespaceLabel"
                control="personalNamespace"
                value="&personalNamespace.label;"
                accesskey="&personalNamespace.accesskey;"
              />
            </hbox>
            <hbox flex="1" align="center">
              <label
                id="publicNamespaceLabel"
                control="publicNamespace"
                value="&publicNamespace.label;"
                accesskey="&publicNamespace.accesskey;"
              />
            </hbox>
            <hbox flex="1" align="center">
              <label
                id="otherUsersNamespaceLabel"
                control="otherUsersNamespace"
                value="&otherUsersNamespace.label;"
                accesskey="&otherUsersNamespace.accesskey;"
              />
            </hbox>
          </vbox>
          <vbox>
            <html:input
              id="personalNamespace"
              type="text"
              class="input-inline"
              aria-labelledby="personalNamespaceLabel"
              amsa_persist="true"
            />
            <html:input
              id="publicNamespace"
              type="text"
              class="input-inline"
              aria-labelledby="publicNamespaceLabel"
              amsa_persist="true"
            />
            <html:input
              id="otherUsersNamespace"
              type="text"
              class="input-inline"
              aria-labelledby="otherUsersNamespaceLabel"
              amsa_persist="true"
            />
          </vbox>
        </hbox>
        <hbox class="indent">
          <checkbox
            id="overrideNamespaces"
            amsa_persist="true"
            label="&overrideNamespaces.label;"
            accesskey="&overrideNamespaces.accesskey;"
          />
        </hbox>
      </vbox>

      <!-- POP3 Panel -->
      <vbox id="pop3Panel">
        <label flex="1" control="folderStorage"
          >&pop3DeferringDesc.label;</label
        >
        <hbox align="center">
          <radiogroup
            id="folderStorage"
            flex="1"
            orient="horizontal"
            amsa_persist="true"
            onselect="updateInboxAccount(this.selectedIndex == 1);"
          >
            <vbox flex="1">
              <hbox>
                <radio
                  id="deferToCurrentAccount"
                  value="currentAccount"
                  label="&accountInbox.label;"
                  accesskey="&accountInbox.accesskey;"
                />
              </hbox>
              <vbox flex="1">
                <hbox>
                  <radio
                    id="deferToOtherAccount"
                    value="otherAccount"
                    label="&deferToServer.label;"
                    accesskey="&deferToServer.accesskey;"
                  >
                  </radio>
                  <menulist
                    id="deferredServerFolderPicker"
                    class="folderMenuItem"
                    flex="1"
                    aria-labelledby="deferToServer"
                  >
                    <menupopup
                      is="folder-menupopup"
                      id="deferredServerPopup"
                      expandFolders="false"
                      mode="deferred"
                      oncommand="this.selectFolder(event.target._folder);"
                    />
                  </menulist>
                </hbox>
                <checkbox
                  amsa_persist="true"
                  id="deferGetNewMail"
                  label="&deferGetNewMail.label;"
                  class="indent"
                  accesskey="&deferGetNewMail.accesskey;"
                />
              </vbox>
            </vbox>
          </radiogroup>
        </hbox>
      </vbox>

      <!-- EWS Panel -->
      <vbox id="ewsPanel">
        <hbox align="center">
          <label
            id="ewsUrlLabel"
            data-l10n-id="ews-url-label"
            control="ewsUrl"
          />
          <hbox class="input-container">
            <html:input
              id="ewsUrl"
              type="text"
              class="input-inline"
              aria-labelledby="ewsUrlLabel"
              amsa_persist="true"
            />
          </hbox>
        </hbox>
        <vbox id="ewsOverrideOAuthDetailsContainer">
          <separator class="groove" />
          <checkbox
            id="ewsOverrideOAuthDetails"
            amsa_persist="true"
            data-l10n-id="ews-override-oauth-details"
            onclick="onChangeOverrideOAuthSelection(this)"
          />
          <hbox class="indent">
            <!-- Labels -->
            <vbox>
              <hbox flex="1" align="center">
                <label
                  id="ewsApplicationIdLabel"
                  data-l10n-id="ews-applicationid-label"
                  control="ewsApplicationId"
                />
              </hbox>
              <hbox flex="1" align="center">
                <label
                  id="ewsTenantIdLabel"
                  data-l10n-id="ews-tenantid-label"
                  control="ewsTenantId"
                />
              </hbox>
              <hbox flex="1" align="center">
                <label
                  id="ewsRedirectUriLabel"
                  data-l10n-id="ews-redirecturi-label"
                  control="ewsRedirectUri"
                />
              </hbox>
              <hbox flex="1" align="center">
                <label
                  id="ewsEndpointHostLabel"
                  data-l10n-id="ews-endpointhost-label"
                  control="ewsEndpointHost"
                />
              </hbox>
              <hbox flex="1" align="center">
                <label
                  id="ewsOAuthScopesLabel"
                  data-l10n-id="ews-oauthscopes-label"
                  control="ewsOAuthScopes"
                />
              </hbox>
            </vbox>
            <!-- Input Fields -->
            <vbox>
              <html:input
                id="ewsApplicationId"
                type="text"
                class="input-inline"
                aria-labelledby="ewsApplicationIdLabel"
                amsa_persist="true"
              />
              <html:input
                id="ewsTenantId"
                type="text"
                class="input-inline"
                aria-labelledby="ewsTenantIdLabel"
                amsa_persist="true"
              />
              <html:input
                id="ewsRedirectUri"
                type="text"
                class="input-inline"
                aria-labelledby="ewsRedirectUriLabel"
                amsa_persist="true"
              />
              <html:input
                id="ewsEndpointHost"
                type="text"
                class="input-inline"
                aria-labelledby="ewsEndpointHostLabel"
                amsa_persist="true"
              />
              <html:input
                id="ewsOAuthScopes"
                type="text"
                class="input-inline"
                aria-labelledby="ewsOAuthScopesLabel"
                amsa_persist="true"
              />
            </vbox>
          </hbox>
        </vbox>
      </vbox>
    </dialog>
  </html:body>
</html>
